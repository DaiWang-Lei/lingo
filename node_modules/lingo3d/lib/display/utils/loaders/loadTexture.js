import { TextureLoader, RepeatWrapping } from "three";
import { forceGet } from "@lincode/utils";
import { increaseLoadingCount, decreaseLoadingCount } from "../../../states/useLoadingCount";
import { handleProgress } from "./bytesLoaded";
const cache = new Map();
export const textureLoader = new TextureLoader();
export default (url) => forceGet(cache, url, () => {
    increaseLoadingCount();
    return textureLoader.load(url, texture => {
        texture.wrapS = texture.wrapT = RepeatWrapping;
        decreaseLoadingCount();
    }, handleProgress, () => decreaseLoadingCount());
});
